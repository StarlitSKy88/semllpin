# SmellPin测试环境变量配置 - 自动化测试方案2.0

# 环境设置
NODE_ENV=test
LOG_LEVEL=error
PORT=3001
HOST=localhost

# 测试数据库配置
TEST_DATABASE_URL=postgres://test:test@localhost:5433/smellpin_test
DB_HOST=localhost
DB_PORT=5433
DB_NAME=smellpin_test
DB_USER=test
DB_PASSWORD=test
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000

# Redis测试配置
REDIS_URL=redis://localhost:6380
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DB=0
CACHE_TTL=60

# JWT配置
JWT_SECRET=test_jwt_secret_key_for_automated_testing_2024_smellpin
JWT_EXPIRES_IN=1h
REFRESH_TOKEN_EXPIRES_IN=7d

# 测试Stripe配置
STRIPE_SECRET_KEY=sk_test_fake_key_for_testing
STRIPE_PUBLISHABLE_KEY=pk_test_fake_key_for_testing
STRIPE_WEBHOOK_SECRET=whsec_test_fake_webhook_secret
STRIPE_API_VERSION=2023-10-16

# 测试PayPal配置
PAYPAL_CLIENT_ID=fake_paypal_client_id_for_testing
PAYPAL_CLIENT_SECRET=fake_paypal_client_secret_for_testing
PAYPAL_MODE=sandbox
PAYPAL_WEBHOOK_ID=test_webhook_id

# 文件上传配置
UPLOAD_PATH=./tests/temp/uploads
MAX_FILE_SIZE=5MB
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,video/mp4,audio/mp3
ENABLE_FILE_VALIDATION=true

# MinIO测试配置
MINIO_ENDPOINT=localhost
MINIO_PORT=9001
MINIO_ACCESS_KEY=test
MINIO_SECRET_KEY=testpassword
MINIO_BUCKET=test-uploads
MINIO_USE_SSL=false

# 地理服务配置
NOMINATIM_URL=https://nominatim.openstreetmap.org
MAPBOX_ACCESS_TOKEN=pk.test.fake_mapbox_token_for_testing
ENABLE_GEOCODING=true
GEOCODING_RATE_LIMIT=false

# 邮件测试配置（MailHog）
SMTP_HOST=localhost
SMTP_PORT=1026
SMTP_USER=test
SMTP_PASSWORD=test
SMTP_SECURE=false
FROM_EMAIL=test@smellpin.test
SUPPORT_EMAIL=support@smellpin.test

# 短信测试配置
SMS_PROVIDER=test
SMS_API_KEY=test_sms_api_key
SMS_FROM_NUMBER=+1234567890

# 外部API配置
WEATHER_API_KEY=test_weather_api_key
AIR_QUALITY_API_KEY=test_air_quality_api_key

# 安全配置
BCRYPT_ROUNDS=4
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
TRUST_PROXY=true

# 搜索引擎测试配置
ELASTICSEARCH_URL=http://localhost:9201
ELASTICSEARCH_INDEX=smellpin_test
ELASTICSEARCH_ENABLE=false

# 监控和日志配置
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ERROR_MONITORING=true
ENABLE_REQUEST_LOGGING=false
ENABLE_SQL_LOGGING=false
PROMETHEUS_PORT=9091

# 并发和性能配置
MAX_CONCURRENT_REQUESTS=100
DB_QUERY_TIMEOUT=10000
API_REQUEST_TIMEOUT=5000
ENABLE_QUERY_CACHE=true
CACHE_QUERY_RESULTS=true

# 测试专用配置
DISABLE_EXTERNAL_SERVICES=true
DISABLE_EMAIL_NOTIFICATIONS=true
DISABLE_SMS_NOTIFICATIONS=true
DISABLE_WEBHOOKS=true
DISABLE_SCHEDULED_TASKS=true
MOCK_EXTERNAL_APIS=true

# 功能开关
ENABLE_USER_REGISTRATION=true
ENABLE_USER_LOGIN=true
ENABLE_ANNOTATION_CREATION=true
ENABLE_PAYMENT_PROCESSING=false
ENABLE_SOCIAL_FEATURES=true
ENABLE_ADMIN_FEATURES=true
ENABLE_SEARCH_FEATURES=true
ENABLE_MEDIA_UPLOAD=true

# 测试运行配置
JEST_TIMEOUT=45000
JEST_MAX_WORKERS=75%
TEST_CLEANUP_AFTER_EACH=true
TEST_SEED_DATA=true
TEST_VERBOSE_LOGS=false

# API版本和端点
API_VERSION=v1
API_BASE_URL=http://localhost:3001/api/v1
FRONTEND_URL=http://localhost:3000

# 国际化配置
DEFAULT_LANGUAGE=zh-CN
SUPPORTED_LANGUAGES=zh-CN,en-US
TIMEZONE=Asia/Shanghai

# 开发和调试
DEBUG=smellpin:*
DEBUG_SQL=false
DEBUG_REDIS=false
DEBUG_PERFORMANCE=true