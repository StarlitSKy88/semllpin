# SmellPin 环境变量模板文件
# 复制此文件为 .env.local, .env.development, .env.production 等
# 并填入实际的配置值

# ===========================================
# 应用基础配置
# ===========================================
NODE_ENV=development
PORT=3000
APP_NAME=SmellPin
APP_VERSION=1.0.0
APP_URL=http://localhost:3000
API_VERSION=v1

# ===========================================
# 数据库配置 (必须使用 Neon PostgreSQL)
# ===========================================
# 主数据库连接 (Neon PostgreSQL)
DATABASE_URL=postgresql://username:password@ep-xxx.us-east-1.aws.neon.tech/smellpin?sslmode=require
DATABASE_HOST=ep-xxx.us-east-1.aws.neon.tech
DATABASE_PORT=5432
DATABASE_NAME=smellpin
DATABASE_USER=username
DATABASE_PASSWORD=your-password
DATABASE_SSL=true

# 数据库连接池配置
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE_TIMEOUT=30000
DATABASE_POOL_ACQUIRE_TIMEOUT=60000

# ===========================================
# Redis 缓存配置
# ===========================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# ===========================================
# JWT 认证配置
# ===========================================
JWT_SECRET=your-super-secret-jwt-key-at-least-32-characters-long
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-refresh-token-secret-key
JWT_REFRESH_EXPIRES_IN=30d

# ===========================================
# 加密配置
# ===========================================
ENCRYPTION_KEY=your-32-character-encryption-key
HASH_SALT_ROUNDS=12
API_KEY_SECRET=your-api-key-secret

# ===========================================
# 短信服务配置
# ===========================================
# 阿里云短信
ALIYUN_ACCESS_KEY_ID=your-aliyun-access-key
ALIYUN_ACCESS_KEY_SECRET=your-aliyun-secret
ALIYUN_SMS_SIGN_NAME=SmellPin
ALIYUN_SMS_TEMPLATE_CODE=SMS_123456789

# 腾讯云短信
TENCENT_SECRET_ID=your-tencent-secret-id
TENCENT_SECRET_KEY=your-tencent-secret-key
TENCENT_SMS_APP_ID=your-app-id
TENCENT_SMS_SIGN=SmellPin
TENCENT_SMS_TEMPLATE_ID=123456

# ===========================================
# 支付配置
# ===========================================
# 支付宝
ALIPAY_APP_ID=your-alipay-app-id
ALIPAY_PRIVATE_KEY=your-alipay-private-key
ALIPAY_PUBLIC_KEY=your-alipay-public-key
ALIPAY_GATEWAY=https://openapi.alipay.com/gateway.do

# 微信支付
WECHAT_APP_ID=your-wechat-app-id
WECHAT_MCH_ID=your-merchant-id
WECHAT_API_KEY=your-wechat-api-key
WECHAT_CERT_PATH=./certs/wechat/

# PayPal
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_MODE=sandbox

# ===========================================
# 文件存储配置
# ===========================================
# 阿里云 OSS
ALIYUN_OSS_ACCESS_KEY_ID=your-oss-access-key
ALIYUN_OSS_ACCESS_KEY_SECRET=your-oss-secret
ALIYUN_OSS_BUCKET=smellpin-files
ALIYUN_OSS_REGION=oss-cn-hangzhou
ALIYUN_OSS_ENDPOINT=https://oss-cn-hangzhou.aliyuncs.com

# AWS S3
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret
AWS_S3_BUCKET=smellpin-files
AWS_S3_REGION=us-east-1

# ===========================================
# 地图服务配置
# ===========================================
# OpenStreetMap + Mapbox 主要配置
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=pk.your-mapbox-access-token
NEXT_PUBLIC_OSM_TILE_URL=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
NEXT_PUBLIC_NOMINATIM_URL=https://nominatim.openstreetmap.org

# 高德地图（备用）
AMAP_KEY=your-amap-key
AMAP_SECRET=your-amap-secret

# 百度地图（备用）
BAIDU_MAP_AK=your-baidu-map-ak
BAIDU_MAP_SK=your-baidu-map-sk

# ===========================================
# 监控和日志配置
# ===========================================
# Sentry 错误监控
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development

# 日志配置
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# ===========================================
# 邮件服务配置
# ===========================================
# SMTP 配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-email-password
SMTP_FROM=noreply@smellpin.com

# SendGrid
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@smellpin.com

# ===========================================
# 安全配置
# ===========================================
# CORS 配置
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# 限流配置
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# 会话配置
SESSION_SECRET=your-session-secret-key
SESSION_MAX_AGE=86400000

# ===========================================
# 缓存配置
# ===========================================
# 缓存策略
CACHE_DEFAULT_TTL=3600
CACHE_USER_TTL=1800
CACHE_ANNOTATION_TTL=7200
CACHE_LBS_TTL=300

# CDN 配置
CDN_URL=https://cdn.smellpin.com
CDN_CACHE_CONTROL=public, max-age=31536000

# ===========================================
# 业务配置
# ===========================================
# LBS 配置
LBS_RADIUS_METERS=100
LBS_REWARD_PERCENTAGE=0.7
LBS_MIN_REWARD_AMOUNT=0.01
LBS_MAX_REWARD_AMOUNT=1000

# 用户配置
USER_MAX_ANNOTATIONS_PER_DAY=10
USER_MIN_WITHDRAWAL_AMOUNT=10
USER_MAX_WITHDRAWAL_AMOUNT=10000

# 内容审核
CONTENT_MODERATION_ENABLED=true
CONTENT_AUTO_APPROVE_THRESHOLD=0.8
CONTENT_AUTO_REJECT_THRESHOLD=0.3

# ===========================================
# WebSocket 配置
# ===========================================
WS_PORT=3001
WS_PATH=/ws
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=1000

# ===========================================
# 健康检查配置
# ===========================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# ===========================================
# 部署配置
# ===========================================
# Vercel (前端部署)
VERCEL_TOKEN=your-vercel-token
VERCEL_ORG_ID=your-org-id
VERCEL_PROJECT_ID=your-project-id

# Cloudflare Workers (后端部署)
CLOUDFLARE_API_TOKEN=your-cloudflare-token
CLOUDFLARE_ACCOUNT_ID=your-account-id
CLOUDFLARE_ZONE_ID=your-zone-id

# Docker 配置
DOCKER_REGISTRY=registry.hub.docker.com
DOCKER_IMAGE_TAG=latest
DOCKER_COMPOSE_PROJECT_NAME=smellpin

# ===========================================
# 开发工具配置
# ===========================================
# 调试配置
DEBUG=smellpin:*
DEBUG_COLORS=true
DEBUG_DEPTH=2

# 测试配置
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/smellpin_test
TEST_TIMEOUT=30000
TEST_COVERAGE_THRESHOLD=80

# ===========================================
# 第三方服务配置
# ===========================================
# AI 服务 (可选)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-3.5-turbo

# 推送通知
FCM_SERVER_KEY=your-fcm-server-key
APNS_KEY_ID=your-apns-key-id
APNS_TEAM_ID=your-apns-team-id

# 社交登录
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

WECHAT_LOGIN_APP_ID=your-wechat-login-app-id
WECHAT_LOGIN_APP_SECRET=your-wechat-login-secret

# ===========================================
# 特性开关
# ===========================================
FEATURE_SOCIAL_LOGIN=true
FEATURE_PUSH_NOTIFICATIONS=true
FEATURE_AI_MODERATION=false
FEATURE_ANALYTICS=true
FEATURE_A_B_TESTING=false